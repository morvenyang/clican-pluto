<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk">
	<script type="text/javascript">
	<!--
	function showDiv() {
		if(document.getElementById('prompt')){
			Effect.Appear("#{rich:clientId('prompt')}");
		}
	}

	function hideDiv(param) {
		if(document.getElementById('prompt')){
			Effect.Fade("#{rich:clientId('prompt')}", param);
		}
	}

	function showNotReadDiv() {
		if(document.getElementById('notReadPrompt')){
			Effect.Appear("#{rich:clientId('notReadPrompt')}");
		}
	}

	function hideNotReadDiv(param) {
		if(document.getElementById('notReadPrompt')){
			Effect.Fade("#{rich:clientId('notReadPrompt')}",param);
		}
	}
	function getPromptTop() {
		var h = jQuery(window).height() - 210;
		return h + 'px';
	}

	function getPromptLeft() {
		var h = jQuery(window).width() - 260;
		return h + 'px';
	}

	function getLocation() {
		var location = new Object();
		location.top = getPromptTop();
		location.left = getPromptLeft();
	}

	var url = "";
	var param = ""
	var promptId = '#{promptAction.promptId}';
	var notReadPromptNumber = 0;

	function showNotReadPrompt() {
		jQuery('.promptDiv').css('top', getPromptTop());
		jQuery('.promptDiv').css('left', getPromptLeft());
		showNotReadDiv();
		flash_title.clear();
	}
	function readPrompt(promptId) {
		jQuery.ajax( {
			url : "/irp/readPrompt.do?promptId=" + promptId,
			cache : false,
			success : function(data) {
				fetchPrompt();
			}
		});
	}
	function fetchPrompt() {
		jQuery
				.ajax( {
					url : "/irp/prompt.do",
					dataType : "json",
					cache : false,
					success : function(data) {
						
					}
				});
	}
	
	//-->
	</script>
	<rich:panel id="prompt" styleClass="promptDiv"
		style="width:250px;height:200px;display:none;position:absolute">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="系统消息"></h:outputText>
			</h:panelGroup>
		</f:facet>
		<t:panelGrid columns="3">
			<t:panelGroup colspan="3">
				<h:outputLabel class="notReadPromptNumber" value=""></h:outputLabel>
			</t:panelGroup>
			<t:panelGroup colspan="3">
				<rich:separator height="1" lineType="dashed" />
			</t:panelGroup>
			<t:panelGroup colspan="3">
				<h:outputLabel value="最新消息"></h:outputLabel>
			</t:panelGroup>
			<div class="promptContent" style="height:115px;width:230px;position:relative;overflow-y:auto;overflow-x:hidden;border:0px"></div>
		</t:panelGrid>
	</rich:panel>
	<rich:panel id="notReadPrompt" styleClass="promptDiv" 
		style="width:250px;height:200px;display:none;position:absolute">
		<f:facet name="header">
			<h:panelGroup>
				<h:panelGrid columns="2">
				<h:outputText value="未读消息 " style="white-space:nowrap;height:5px"></h:outputText>
				<h:graphicImage value="/img/close.png" style="cursor: pointer;margin-left:170px;border:0"
				onclick="hideNotReadDiv()" />
				</h:panelGrid>
			</h:panelGroup>
		</f:facet>
		<t:panelGrid columns="3">
			<t:panelGroup colspan="3">
				<h:outputLabel class="notReadPromptNumber" value=""></h:outputLabel>
			</t:panelGroup>
			<t:panelGroup colspan="3">
				<rich:separator height="1" lineType="dashed" />
			</t:panelGroup>
			<t:panelGroup colspan="3">
				<h:outputLabel value="未读消息"></h:outputLabel>
			</t:panelGroup>
			<div class="notReadPromptContent" style="height:115px;width:230px;position:relative;overflow-y:auto;overflow-x:hidden;border:0px"></div>
		</t:panelGrid>
	</rich:panel>
	<a4j:form>
	<rich:toolBar id="footerToolBar" styleClass="bar">
		<rich:toolBarGroup location="right" style="padding: 0 0;" >
			<h:outputLabel class="notReadPromptNumber" value=""
				onclick="showNotReadPrompt()" style="cursor: pointer">
			</h:outputLabel>
			<h:outputLabel value="Pluto">
			</h:outputLabel>
		</rich:toolBarGroup>
	</rich:toolBar>
	</a4j:form>
</ui:composition>

